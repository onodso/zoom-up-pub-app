# 実データソース一覧 - 収集可能な公開データ
## Garbage In, Garbage Out防止のための実データ戦略

**原則: ダミーデータ禁止。実データのみを使用する。**

---

## ✅ **即座に利用可能な実データソース**

### **1. 総務省統計（e-Stat）**

#### **URL:** https://www.e-stat.go.jp/
#### **API:** あり（要アプリケーションID）

**取得可能データ:**
- ✅ 人口・世帯数（国勢調査）
- ✅ 職員数（地方公務員給与実態調査）
- ✅ 財政力指数（地方財政状況調査）
- ✅ 高齢化率（住民基本台帳）
- ✅ 人口減少率（人口動態統計）

**実装方法:**
```python
# e-Stat API（無料、要登録）
API_URL = "https://api.e-stat.go.jp/rest/3.0/app/json/getStatsData"
params = {
    'appId': 'YOUR_APP_ID',  # 登録後取得
    'statsDataId': '0003410379',  # 国勢調査ID
    'cdArea': city_code
}
```

**データ品質:** ⭐⭐⭐⭐⭐ (公式統計)

---

### **2. 地方公共団体情報システム機構（J-LIS）**

#### **URL:** https://www.j-lis.go.jp/

**取得可能データ:**
- ✅ 全国自治体コード一覧（公開CSV）
- ✅ 合併情報
- ✅ 自治体公式サイトURL

**実装方法:**
```python
# 公開CSVダウンロード
csv_url = "https://www.j-lis.go.jp/spd/code-address/jititai-code.html"
# → CSVファイルをダウンロードして直接インポート
```

**データ品質:** ⭐⭐⭐⭐⭐ (公式データ)

---

### **3. 総務省「自治体DX推進計画」フォローアップ調査**

#### **URL:** https://www.soumu.go.jp/denshijiti/dx_follow_up.html

**取得可能データ:**
- ✅ DX推進計画策定状況
- ✅ 外部CIO/CDO設置状況
- ✅ テレワーク実施率
- ✅ オンライン申請対応状況

**実装方法:**
```python
# Excel/PDF公開データをダウンロード
# → pandas.read_excel()でパース
import pandas as pd
df = pd.read_excel('soumu_dx_followup_2024.xlsx')
```

**データ品質:** ⭐⭐⭐⭐⭐ (総務省公式調査)

---

### **4. 文部科学省「GIGAスクール構想」実施状況**

#### **URL:** https://www.mext.go.jp/a_menu/shotou/zyouhou/detail/mext_00001.html

**取得可能データ:**
- ✅ 学校数（小・中・高）
- ✅ GIGA端末配布状況
- ✅ 端末種類（iPad/Chromebook/Windows）
- ✅ ネットワーク整備状況

**実装方法:**
```python
# 文科省公開Excel
excel_url = "https://www.mext.go.jp/.../giga_survey_2024.xlsx"
df = pd.read_excel(excel_url, sheet_name='自治体別')
```

**データ品質:** ⭐⭐⭐⭐⭐ (文科省公式)

---

### **5. 国土地理院 地理院地図API**

#### **URL:** https://maps.gsi.go.jp/development/api.html

**取得可能データ:**
- ✅ 正確な緯度・経度（市役所位置）
- ✅ 標高
- ✅ ハザードマップ情報

**実装方法:**
```python
# 地理院地図API（無料）
api_url = "https://msearch.gsi.go.jp/address-search/AddressSearch"
params = {'q': '福岡市役所'}
# → 緯度経度を取得
```

**データ品質:** ⭐⭐⭐⭐⭐ (国土地理院公式)

---

### **6. 内閣府「デジタル田園都市国家構想」採択自治体**

#### **URL:** https://www.chisou.go.jp/sousei/

**取得可能データ:**
- ✅ 採択自治体リスト
- ✅ 採択プロジェクト内容
- ✅ 補助金額

**実装方法:**
```python
# 公開PDFリストをパース
# または内閣府サイトからスクレイピング
```

**データ品質:** ⭐⭐⭐⭐⭐ (内閣府公式)

---

### **7. 総務省「地方公共団体における業務改革」調査**

#### **URL:** https://www.soumu.go.jp/main_sosiki/jichi_gyousei/c-gyousei/

**取得可能データ:**
- ✅ AI・RPA導入状況
- ✅ 窓口業務改革事例
- ✅ BPR実施状況

**データ品質:** ⭐⭐⭐⭐ (総務省調査)

---

## ⚠️ **要工夫が必要な実データソース**

### **8. 入札情報**

#### **データソース:**
- 調達ポータル: https://www.chotatuportal.jp/
- 各自治体入札情報ページ

**取得可能データ:**
- ⭐ PBXベンダー・機種
- ⭐ Microsoft 365契約情報
- ⭐ Web会議ツール
- ⭐ IT予算規模

**課題:**
- フォーマットが自治体ごとに異なる
- スクレイピング必要
- データ整形が大変

**実装方法:**
```python
# 自治体ごとに個別対応が必要
# 優先度の高い大規模自治体（トップ50）のみ手動収集も検討
```

**データ品質:** ⭐⭐⭐ (公開情報だが整形必要)

---

### **9. 各自治体公式サイト**

**取得可能データ:**
- ⭐ 市長名
- ⭐ 組織図
- ⭐ DX推進計画PDF
- ⭐ プレスリリース

**課題:**
- HTMLフォーマットが統一されていない
- スクレイピング成功率: 30-50%

**実装方法:**
```python
# 成功率を上げるため:
# 1. まず公式URLから市長ページへのリンクを探す
# 2. 複数のパターンマッチングを試す
# 3. 失敗したら手動収集リストに追加
```

**データ品質:** ⭐⭐ (不確実性高い)

---

## 🎯 **実データ収集の優先順位**

### **Week 1: 即実装（確実に取得可能）**

| 優先度 | データソース | 取得項目 | 実装工数 | データ品質 | 状態 |
|--------|------------|---------|---------|-----------|------|
| 🔴 **1** | e-Stat公開Excel | 人口・世帯数 | 1時間 | ⭐⭐⭐⭐⭐ | ✅ **完了（2/15）** |
| 🔴 **2** | 総務省DX調査Excel | DX推進状況 | 2時間 | ⭐⭐⭐⭐⭐ | 🔜 次のタスク |
| 🔴 **3** | 文科省GIGAデータ | 学校数・端末 | 2時間 | ⭐⭐⭐⭐⭐ | ⏸️ 待機中 |
| 🟡 **4** | Google Search API | DX/Zoomニュース | 3時間 | ⭐⭐⭐⭐ | ⏸️ 待機中 |

**Week 1実績（2/15時点）:**
- ✅ e-Stat人口データ: 1,915自治体収集完了
- ✅ データ完全性: 46.9% → 85.4%（目標80%達成）

---

### **Week 2-3: 中期実装（工数かかるが価値高い）**

| 優先度 | データソース | 取得項目 | 実装工数 | データ品質 |
|--------|------------|---------|---------|-----------|
| 🟡 **5** | 入札情報（Top 50） | PBX・Microsoft情報 | 20時間 | ⭐⭐⭐ |
| 🟡 **6** | 各自治体サイト | 市長名（Top 100） | 10時間 | ⭐⭐ |
| 🟢 **7** | 内閣府データ | デジタル田園都市 | 2時間 | ⭐⭐⭐⭐⭐ |

**Week 2-3合計: 32時間**
**期待データ完全性: 80% → 90%**

---

## 📊 **実データ vs ダミーデータ 比較**

### **データベース状況（2026-02-15更新）:**

| 項目 | 現状 | データソース | 状態 |
|------|------|------------|------|
| **人口** | **実測値** | **e-Stat令和2年国勢調査** | ✅ **実データ（2,405/2,406）** |
| **世帯数** | **推定値** | **人口×0.4** | ⚠️ **推定（2,405/2,406）** |
| 財政力指数 | 実測値 | 総務省統計 | ✅ 実データ（1,709/2,406） |
| 緯度経度 | 実測値 | 国土地理院 | ✅ 実データ（2,406/2,406） |
| 市長名（一部） | 実データ | 手動入力 | ⚠️ 一部のみ（15/2,406） |
| PBX情報 | NULL | - | ⏸️ 削除済み |
| Microsoft 365 | NULL | - | ⏸️ 削除済み |
| DX Status | NULL | - | 🔴 次のタスク |

**結論（2/15）: ダミーデータ0%、実データ85.4%、NULL 14.6%**

---

## ✅ **Week 1実装計画（実データのみ）**

### **Day 1 (今日): e-Stat API連携**

```bash
# 手順:
1. e-Stat APIキー取得（無料、即日発行）
   → https://www.e-stat.go.jp/api/api-info/api-guide

2. スクリプト実装
   → backend/services/estat_api.py

3. データ取得・更新
   → 全1,916自治体の人口・世帯数を実データに更新

4. 検証
   → ダミーデータ（random推定）が実データに置き換わったことを確認
```

**成果:** 人口・世帯数が**100%実データ**に

---

### **Day 2: 総務省DX調査データ**

```bash
# 手順:
1. 総務省サイトからExcelダウンロード
2. pandasでパース
3. DX推進状況をJSONで保存（dx_status列）

# 取得データ:
- DX推進計画策定: Yes/No
- 外部CIO設置: Yes/No
- テレワーク実施率: %
```

**成果:** DX Status が**実データ**に

---

### **Day 3: 文科省GIGAデータ**

```bash
# 手順:
1. 文科省公開Excelダウンロード
2. education_infoテーブルに保存

# 取得データ:
- 小学校数
- 中学校数
- GIGA端末種類
```

**成果:** 教育情報が**実データ**に → Pattern 4判定可能

---

## 🚀 **即実行: e-Stat APIキー取得**

**今すぐ実行すべきアクション:**

1. **e-Stat APIキー取得**
   - URL: https://www.e-stat.go.jp/api/
   - 登録: メールアドレスのみ
   - 発行: 即日（数分）
   - 費用: 無料

2. **`.env`に追加**
   ```
   ESTAT_APP_ID=your_actual_api_key_here
   ```

3. **実データ取得開始**
   ```bash
   python3 backend/services/estat_real_data.py
   ```

---

## ⚠️ **ダミーデータの削除計画**

### **削除対象:**

| テーブル | カラム | 現在の値 | 対処 |
|---------|--------|---------|------|
| municipalities | population | random推定 | e-Stat実データで上書き |
| municipalities | households | random推定 | e-Stat実データで上書き |
| it_infrastructure | pbx_vendor | サンプル"NEC" | **削除**（実データ収集まで） |
| it_infrastructure | microsoft_365 | サンプル"E3" | **削除**（実データ収集まで） |

### **削除SQL:**

```sql
-- サンプルデータを削除
DELETE FROM it_infrastructure WHERE data_source = 'sample_bidding_doc';

-- random推定の人口をNULLに戻す（実データ取得前）
UPDATE municipalities SET population = NULL, households = NULL
WHERE population = 100000;  -- ダミー値
```

---

## 📈 **実装後の期待効果**

### **Before (現在):**
```
総データ項目: 80項目
実データ: 32項目 (40%)
ダミー・推定: 48項目 (60%)

→ Garbage In, Garbage Out リスク: 高
```

### **After (Week 1完了後):**
```
総データ項目: 80項目
実データ: 64項目 (80%)
ダミー・推定: 16項目 (20%)

→ 信頼性: 大幅向上
→ パターン判定: 実用レベル
```

---

## ✅ **次のアクション**

**今すぐ実行:**
1. e-Stat APIキー取得（5分）
2. estat_real_data.pyを実装（2時間）
3. 全1,916自治体の人口を実データに更新（1時間）

**これにより:**
- ✅ ダミーデータ削減: 60% → 40%
- ✅ 実データ率向上: 40% → 60%
- ✅ Garbage Out回避

**実行しますか？**
